<div class="nexmoe-post">
  <% if (page.cover){ %>
      <div class="nexmoe-post-cover" style="padding-bottom: <%- page.coverHeight/page.coverWidth*100 %>%;"> 
          <img data-src="<%- page.cover %>" data-sizes="auto" alt="<%= page.title %>" class="lazyload">
          <h1><%= page.title %></h1>
      </div>
  <%}  else{ %>
      <div class="nexmoe-post-cover" style="padding-bottom: <%- theme.postcover.height/theme.postcover.width*100 %>%;"> 
          <img data-src="<%- theme.postcover.path %>" data-sizes="auto" alt="<%= page.title %>" class="lazyload">
          <h1><%= page.title %></h1>
      </div>
  <% } %>
  
  <%- partial('_partial/_post/meta') %>

  <div class="nexmoe-post-right">
    <% if (page.toc || theme.function.globalToc){ %>
      <div class="nexmoe-fixed">
        <div class="nexmoe-valign">
            <div class="nexmoe-toc">
                <% const toc_obj = toc(page.content, {list_number: true}); %>
                <% if (toc_obj.length > 0) { %>
                  <%- toc_obj %>
                <% } %>
            </div>
        </div>
      </div>
    <%} %>
  </div>

  <article>
    <%- image_auto_lazyload(page.content) %>
  </article>

  <% if (!page.reprint){ %>
    <%- partial('_partial/copyright') %>
  <% } %>
  
  <%- partial('_partial/_post/tag') %>

  <div class="nexmoe-post-footer">
    <%- partial('_partial/comment') %>
  </div>
</div>

<script>
  (function(){
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();
</script>

<% if (page.mathjax == true){ %>
  <%- partial('_partial/mathjax') %>
<% } %>
